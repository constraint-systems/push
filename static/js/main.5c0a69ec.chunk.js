(this.webpackJsonppanel=this.webpackJsonppanel||[]).push([[0],{22:function(e,t,i){},25:function(e,t,i){"use strict";i.r(t);var n=i(8),s=i.n(n),r=i(17),o=i.n(r),a=(i(22),i(12)),c=i(9),h=i(0),l=i(1),d=i(7),u=i(6),v=i(5),p=i(2),f=i(3),m=function(){function e(t){Object(h.a)(this,e),this.active=void 0,this.subPointers=void 0,this.initial=void 0,this.current=void 0,this.diff=void 0,this.logEl=void 0,this.markEl=void 0,this.state=void 0,this.active=!1,this.subPointers=null,this.initial=new d.r,this.current=new d.r,this.diff=new d.r,this.logEl=null,this.markEl=null,this.state=t}return Object(l.a)(e,[{key:"start",value:function(e){this.active=!0}},{key:"end",value:function(){this.active=!1,this.current.set(0,0),this.diff.set(0,0)}},{key:"setMarkEl",value:function(e){this.markEl=e,this.updateMark()}},{key:"updateMark",value:function(){null!==this.markEl&&(this.active?this.markEl.style.display="block":this.markEl.style.display="none",this.markEl.style.left=this.current.x+"px",this.markEl.style.top=this.current.y+"px")}}]),e}(),b=i(11),w=i.n(b),j=i(13),x=function(e){var t=e.state.group.geometry.attributes.visible.array;e.raycaster.setFromCamera(e.clip2,e.state.camera);var i,n=e.raycaster.intersectObject(e.state.group),s=Object(a.a)(n);try{for(s.s();!(i=s.n()).done;){var r=i.value.instanceId;if(t[r])return r}}catch(o){s.e(o)}finally{s.f()}return null},y=function(e,t){var i=Math.floor(t/e.depth),n=Math.floor(i/e.cols),s=i%e.cols;return n*e.cols+s},g=function(e){e.selectedGrid.fill(0)},O=function(e){for(var t=e.outlineBoxes.geometry.attributes.selected.array,i=0;i<e.selectedGrid.length;i++){var n=e.selectedGrid[i];t[i]=n}e.outlineBoxes.geometry.attributes.selected.needsUpdate=!0},P=function(e,t){!function(e,t){e.selectedGrid[t]=1}(e,y(e,t)),O(e)},k=function(e,t,i){var n=y(e,i);t.controlIndexCache!==n&&(e.selectedGrid[n]=0===e.selectedGrid[n]?1:0,O(e),t.controlIndexCache=n)},C=function(e){e.initialCameraPosition.copy(e.camera.position)},M=function(e,t){var i=2*Math.tan(e.camera.fov*Math.PI/360)*e.camera.position.z/window.innerHeight;e.camera.position.x=e.initialCameraPosition.x-t.diff.x*i,e.camera.position.y=e.initialCameraPosition.y+t.diff.y*i},E=function(e,t){var i=2*Math.tan(e.camera.fov*Math.PI/360)*e.camera.position.z/window.innerHeight;e.camera.position.x-=16*t[0]*i,e.camera.position.y+=16*t[1]*i},S=function(e){e.initialRotation.copy(e.group.rotation)},H=function(e,t){var i=Math.min(Math.PI/2,Math.max(-Math.PI/2,e.initialRotation.y+t.diff.x*e.worldPixel)),n=Math.min(Math.PI/2,Math.max(-Math.PI/2,e.initialRotation.x+t.diff.y*e.worldPixel));e.group.rotation.x=n,e.outlineBoxes.rotation.x=n,e.group.rotation.y=i,e.outlineBoxes.rotation.y=i},I=function(e,t){var i=e.camera.near+.1,n=e.camera.far-.1;return Math.min(n,Math.max(i,t))},L=function(e,t){var i=(window.innerHeight-t)/window.innerHeight;e.camera.position.z=I(e,e.camera.position.z/i)},N=function(e){var t=e.printMultiplier*window.devicePixelRatio,i=window.innerWidth,n=window.innerHeight;e.printTarget.setSize(i*t,n*t),e.printTarget.setClearColor(e.backgroundColor,e.backgroundAlpha),e.printTarget.render(e.scene,e.camera);var s=document.createElement("canvas");s.width=e.view.diff.x*t,s.height=e.view.diff.y*t,s.getContext("2d").drawImage(e.printTarget.domElement,e.view.min.x*t,e.view.min.y*t,e.view.diff.x*t,e.view.diff.y*t,0,0,e.view.diff.x*t,e.view.diff.y*t);var r=document.createElement("a");s.toBlob((function(e){r.setAttribute("download","push-"+Math.round((new Date).getTime()/1e3)+".png"),r.setAttribute("href",URL.createObjectURL(e)),r.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window}))}))};function B(e){var t=document.querySelector("#fileInput");function i(){return n.apply(this,arguments)}function n(){return(n=Object(j.a)(w.a.mark((function t(){var n,s,r,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=Object(a.a)(this.files),t.prev=1,n.s();case 3:if((s=n.n()).done){t.next=12;break}if(!((r=s.value).type.indexOf("image")<0)){t.next=7;break}return t.abrupt("continue",10);case 7:o=URL.createObjectURL(r),e(o),this.removeEventListener("change",i);case 10:t.next=3;break;case 12:t.next=17;break;case 14:t.prev=14,t.t0=t.catch(1),n.e(t.t0);case 17:return t.prev=17,n.f(),t.finish(17);case 20:case"end":return t.stop()}}),t,this,[[1,14,17,20]])})))).apply(this,arguments)}return t.addEventListener("change",i),t.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),t}var T=function(){function e(t,i,n){Object(h.a)(this,e),this.mouse1=void 0,this.mouse2=void 0,this.min=void 0,this.max=void 0,this.diff=void 0,this.div=void 0,this.mouse1=new d.r,this.mouse2=new d.r,this.min=new d.r,this.max=new d.r,this.diff=new d.r,this.mouse1.copy(i),this.mouse2.copy(n);var s=new d.b(t.highlightColor),r=document.createElement("div");this.div=r;var o=s.getStyle(),a=o.slice(0,o.length-1)+","+t.highlightAlpha+")";r.style.background=a,r.style.border="solid 1px "+o,r.style.position="fixed",r.style.top="0",r.style.left="0",document.body.appendChild(r)}return Object(l.a)(e,[{key:"update",value:function(e){this.mouse2.copy(e),this.min.copy(this.mouse2).min(this.mouse1),this.max.copy(this.mouse2).max(this.mouse1),this.diff.copy(this.max).sub(this.min),this.render()}},{key:"render",value:function(){this.div.style.left=this.min.x+"px",this.div.style.top=this.min.y+"px",this.div.style.width=this.diff.x+"px",this.div.style.height=this.diff.y+"px"}},{key:"destroy",value:function(){this.div.remove()}}]),e}(),R=new d.d,F=new d.s,X=new d.s,A=new d.s,Y=new d.s,D=new d.s,z=new d.s,G=new d.s,W=new d.s,U=new d.s,K=new d.s,_=new d.s,Q=new d.s,q=new d.s,V=new d.s,J=new d.h,Z=new d.m,$=new d.s,ee=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_VALUE;Object(h.a)(this,e),this.camera=t,this.scene=i,this.startPoint=new d.s,this.endPoint=new d.s,this.collection=[],this.instances={},this.deep=n}return Object(l.a)(e,[{key:"select",value:function(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(R,this.scene),this.collection}},{key:"updateFrustum",value:function(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){X.copy(e),X.x=Math.min(e.x,t.x),X.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),A.setFromMatrixPosition(this.camera.matrixWorld),Y.copy(X),D.set(t.x,X.y,0),z.copy(t),G.set(X.x,t.y,0),Y.unproject(this.camera),D.unproject(this.camera),z.unproject(this.camera),G.unproject(this.camera),Q.copy(Y).sub(A),q.copy(D).sub(A),V.copy(z).sub(A),Q.normalize(),q.normalize(),V.normalize(),Q.multiplyScalar(this.deep),q.multiplyScalar(this.deep),V.multiplyScalar(this.deep),Q.add(A),q.add(A),V.add(A);var i=R.planes;i[0].setFromCoplanarPoints(A,Y,D),i[1].setFromCoplanarPoints(A,D,z),i[2].setFromCoplanarPoints(z,G,A),i[3].setFromCoplanarPoints(G,Y,A),i[4].setFromCoplanarPoints(D,z,G),i[5].setFromCoplanarPoints(V,q,Q),i[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){var n=Math.min(e.x,t.x),s=Math.max(e.y,t.y),r=Math.max(e.x,t.x),o=Math.min(e.y,t.y);Y.set(n,s,-1),D.set(r,s,-1),z.set(r,o,-1),G.set(n,o,-1),W.set(n,s,1),U.set(r,s,1),K.set(r,o,1),_.set(n,o,1),Y.unproject(this.camera),D.unproject(this.camera),z.unproject(this.camera),G.unproject(this.camera),W.unproject(this.camera),U.unproject(this.camera),K.unproject(this.camera),_.unproject(this.camera);var a=R.planes;a[0].setFromCoplanarPoints(Y,W,U),a[1].setFromCoplanarPoints(D,U,K),a[2].setFromCoplanarPoints(K,_,G),a[3].setFromCoplanarPoints(_,W,Y),a[4].setFromCoplanarPoints(D,z,G),a[5].setFromCoplanarPoints(K,U,W),a[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}},{key:"searchChildInFrustum",value:function(e,t){if(t.isMesh||t.isLine||t.isPoints)if(t.isInstancedMesh){this.instances[t.uuid]=[];for(var i=0;i<t.count;i++)t.getMatrixAt(i,J),J.decompose(F,Z,$),F.applyMatrix4(t.matrixWorld),e.containsPoint(F)&&this.instances[t.uuid].push(i)}else null===t.geometry.boundingSphere&&t.geometry.computeBoundingSphere(),F.copy(t.geometry.boundingSphere.center),F.applyMatrix4(t.matrixWorld),e.containsPoint(F)&&this.collection.push(t);if(t.children.length>0)for(var n=0;n<t.children.length;n++)this.searchChildInFrustum(e,t.children[n])}}]),e}(),te=function(e){Object(p.a)(i,e);var t=Object(f.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).raycaster=void 0,n.clip=void 0,n.clip2=void 0,n.tempClip=void 0,n.ray=void 0,n.areaSelecting=void 0,n.pushPulling=void 0,n.selectIndexCache=void 0,n.startTime=void 0,n.selectBox=void 0,n.selectionBox=void 0,n.controlIndexCache=void 0,n.clip=new d.s,n.clip2=new d.r,n.tempClip=new d.s,n.ray=new d.s,n.raycaster=new d.n,n.areaSelecting=!1,n.pushPulling=!1,n.selectBox=null,n.selectIndexCache=null,n.startTime=0,n.selectionBox=new ee(n.state.camera,n.state.scene),n.controlIndexCache=null,n}return Object(l.a)(i,[{key:"setRay",value:function(){this.clip.set(this.current.x/window.innerWidth*2-1,-this.current.y/window.innerHeight*2+1,.5),this.clip2.set(this.clip.x,this.clip.y),this.tempClip.copy(this.clip),this.tempClip.unproject(this.state.camera),this.tempClip.sub(this.state.camera.position).normalize();var e=(0-this.state.camera.position.z)/this.tempClip.z;this.ray.copy(this.state.camera.position),this.ray.add(this.tempClip.multiplyScalar(e))}},{key:"start",value:function(e){Object(u.a)(Object(v.a)(i.prototype),"start",this).call(this,e),this.subPointers=e;var t=Object(c.a)(this.subPointers,1)[0];this.initial.copy(t.current),this.current.copy(t.current),this.diff.set(0,0),this.areaSelecting=!1,this.pushPulling=!1,this.startTime=Date.now(),this.controlIndexCache=null;var n=this.state.pressed;if(n.includes("d"))C(this.state);else if(n.includes("v"))this.state.view.mouse1.copy(this.current),this.state.view.mouse2.copy(this.current),this.state.view.update();else if(n.includes("r"))S(this.state);else if(n.includes("control")){this.setRay();var s=x(this);null!==s&&k(this.state,this,s)}else{this.state.gridCache=this.state.selectedGrid.slice(),this.setRay();var r=x(this);if(null!==r){var o=function(e,t){var i=y(e,t);return e.selectedGrid[i]}(this.state,r);o&&!n.includes("shift")?(this.state.heightGridCache=this.state.heightGrid.slice(),this.pushPulling=!0):(n.includes("shift")||g(this.state),o||(this.selectIndexCache=r,P(this.state,r)))}else n.includes("shift")||g(this.state),O(this.state)}}},{key:"move",value:function(){if(this.active&&this.subPointers){var e=Object(c.a)(this.subPointers,1)[0];this.current.copy(e.current),this.diff.copy(this.current).sub(this.initial);var t=this.state.pressed;if(t.includes("d"))M(this.state,this);else if(t.includes("r"))H(this.state,this);else if(t.includes("v"))this.state.view.mouse2.copy(this.current),this.state.view.update();else if(t.includes("control")||t.includes("alt")){this.setRay();var i=x(this);null!==i&&k(this.state,this,i)}else this.pushPulling?function(e,t){for(var i=e.group.geometry.attributes.visible.array,n=0;n<e.selectedGrid.length;n++)if(e.selectedGrid[n]){e.heightGrid[n]=Math.max(1,Math.min(e.depth,e.heightGridCache[n]+Math.round(t.diff.y/8)));for(var s=e.heightGrid[n],r=Math.floor(n/e.cols),o=n%e.cols,a=0;a<e.depth;a++)i[r*e.cols*e.depth+o*e.depth+a]=a<s?1:0}e.group.geometry.attributes.visible.needsUpdate=!0,e.outlineBoxes.updateDepth()}(this.state,this):Math.abs(this.diff.x)>4||Math.abs(this.diff.y)>4?this.areaSelecting?(this.selectBox.update(this.current),this.selectionBox.endPoint.copy(this.clip)):(this.setRay(),this.areaSelecting=!0,this.selectBox=new T(this.state,this.initial,this.current),this.selectionBox.startPoint.copy(this.clip),n=this.state,s=this.selectIndexCache,function(e,t){e.selectedGrid[t]=0}(n,y(n,s)),O(n)):this.areaSelecting&&(this.areaSelecting=!1,this.selectBox.destroy(),this.selectBox=null,P(this.state,this.selectIndexCache))}var n,s}},{key:"cancel",value:function(){this.pushPulling=!1,this.areaSelecting&&(this.areaSelecting=!1,this.selectBox.destroy()),this.active=!1}},{key:"end",value:function(){this.pushPulling=!1,this.areaSelecting&&(this.areaSelecting=!1,this.selectBox.destroy(),this.setRay(),function(e,t,i){i.endPoint.copy(t.clip),i.select();var n,s=t.state.group.geometry.attributes.visible.array,r=i.instances[e.group.uuid],o=0,c=[],h=Object(a.a)(r);try{for(h.s();!(n=h.n()).done;){var l=n.value;if(s[l]){var d=Math.floor(l/e.depth),u=Math.floor(d/e.cols),v=d%e.cols,p=void 0;(p=l<e.depth?l:l%(u*e.cols*e.depth+v*e.depth))===e.heightGrid[u*e.cols+v]-1&&(o=Math.max(o,p),c.push([p,u*e.cols+v]))}}}catch(w){h.e(w)}finally{h.f()}for(var f=0,m=c;f<m.length;f++){var b=m[f];b[0]===o&&(e.selectedGrid[b[1]]=1)}O(e)}(this.state,this,this.selectionBox)),Object(u.a)(Object(v.a)(i.prototype),"end",this).call(this)}}]),i}(m),ie=function(e){Object(p.a)(i,e);var t=Object(f.a)(i);function i(){return Object(h.a)(this,i),t.apply(this,arguments)}return Object(l.a)(i,[{key:"start",value:function(e){this.active=!0,this.subPointers=e;var t=Object(c.a)(e,3),i=t[0],n=t[1],s=t[2];this.current.copy(i.current).add(n.current).add(s.current).divideScalar(3),this.initial.copy(this.current),this.diff.set(0,0),C(this.state)}},{key:"move",value:function(){if(this.subPointers){var e=Object(c.a)(this.subPointers,3),t=e[0],i=e[1],n=e[2];this.current.copy(t.current).add(i.current).add(n.current).divideScalar(3),this.diff.copy(this.current).sub(this.initial),M(this.state,this)}}},{key:"end",value:function(){Object(u.a)(Object(v.a)(i.prototype),"end",this).call(this)}}]),i}(m),ne=function(e){Object(p.a)(i,e);var t=Object(f.a)(i);function i(e){var n;return Object(h.a)(this,i),(n=t.call(this,e)).initialBetween=void 0,n.between=void 0,n.between=new d.r,n.initialBetween=new d.r,n}return Object(l.a)(i,[{key:"start",value:function(e){Object(u.a)(Object(v.a)(i.prototype),"start",this).call(this,e),this.subPointers=e;var t,n=Object(c.a)(e,2),s=n[0],r=n[1];this.current.copy(s.current).add(r.current).divideScalar(2),this.initial.copy(this.current),this.between.copy(s.current).sub(r.current),this.initialBetween.copy(this.between),this.diff.set(0,0),S(this.state),(t=this.state).initialCameraPosition.copy(t.camera.position)}},{key:"move",value:function(){if(this.subPointers){var e=Object(c.a)(this.subPointers,2),t=e[0],i=e[1];this.current.copy(t.current).add(i.current).divideScalar(2),this.between.copy(t.current).sub(i.current),this.diff.copy(this.current).sub(this.initial),H(this.state,this),function(e,t){var i=Math.sqrt(t.initialBetween.x*t.initialBetween.x+t.initialBetween.y*t.initialBetween.y),n=Math.sqrt(t.between.x*t.between.x+t.between.y*t.between.y),s=(window.innerHeight+2*(n-i))/window.innerHeight;e.camera.position.z=I(e,e.initialCameraPosition.z/s)}(this.state,this)}}},{key:"end",value:function(){Object(u.a)(Object(v.a)(i.prototype),"end",this).call(this)}}]),i}(m),se=function(){function e(t){Object(h.a)(this,e),this.active=void 0,this.initial=void 0,this.current=void 0,this.diff=void 0,this.state=void 0,this.active=!1,this.initial=new d.r,this.current=new d.r,this.diff=new d.r,this.state=t}return Object(l.a)(e,[{key:"start",value:function(e){this.active=!0,this.current.set(e.clientX,e.clientY),this.initial.copy(this.current),this.diff.set(0,0),S(this.state)}},{key:"move",value:function(e){this.current.set(e.clientX,e.clientY),this.diff.copy(this.current).sub(this.initial),H(this.state,this)}},{key:"end",value:function(){this.active=!1,this.current.set(0,0),this.diff.set(0,0)}}]),e}(),re=function(){function e(t,i){switch(Object(h.a)(this,e),this.state=void 0,this.id=void 0,this.current=void 0,this.state=t,this.id=i.pointerId,this.current=new d.r(i.clientX,i.clientY),this.state.pointers.push(this),this.state.pointers.length){case 1:this.state.PointerOne.start(this.state.pointers.slice(0,1));break;case 2:Date.now()-t.PointerOne.startTime&&(t.selectedGrid=t.gridCache,O(t)),this.state.PointerOne.cancel(),this.state.PointerTwo.start(this.state.pointers.slice(0,2));break;default:this.state.PointerTwo.end(),this.state.PointerThree.start(this.state.pointers.slice(0,3))}}return Object(l.a)(e,[{key:"move",value:function(e){switch(this.current.set(e.clientX,e.clientY),this.state.pointers.length){case 1:this.state.PointerOne.move();break;case 2:this.state.PointerTwo.move();break;default:this.state.PointerThree.move()}}},{key:"remove",value:function(){var e=ae(this.state,this.id);switch(-1!==e&&this.state.pointers.splice(e,1),this.state.pointers.length){case 0:this.state.PointerOne.end();break;case 1:this.state.PointerTwo.end();break;case 2:this.state.PointerThree.end(),this.state.PointerTwo.start(this.state.pointers.slice(0,2))}}}]),e}(),oe=function(e){var t=e.state;return Object(n.useEffect)((function(){var e=t.canvas,i=function(e){var i;0===t.lastPointerButtonPressed?t.pointers.length>0?(i=t.pressed.includes(" ")?ce(t,999):ce(t,e.pointerId))&&i.move(e):t.PointerHover.active?t.PointerHover.move(e.clientX,e.clientY):t.PointerHover.start(e.clientX,e.clientY):1===t.lastPointerButtonPressed?t.PointerMiddle.active&&t.PointerMiddle.move(e):t.lastPointerButtonPressed},n=function(i){t.PointerHover.end(),t.lastPointerButtonPressed=i.button,0===t.lastPointerButtonPressed?(new re(t,i),e.setPointerCapture(i.pointerId)):1===t.lastPointerButtonPressed?t.PointerMiddle.start(i):t.lastPointerButtonPressed,e.setPointerCapture(i.pointerId)},s=function(i){if(0===t.lastPointerButtonPressed){if(t.pointers.length>0){var n=ce(t,i.pointerId);n&&n.remove()}else t.PointerHover.end();e.releasePointerCapture(i.pointerId)}else 1===t.lastPointerButtonPressed?(t.PointerMiddle.end(),t.lastPointerButtonPressed=0):t.lastPointerButtonPressed},r=function(e){e.preventDefault(),L(t,e.deltaY)};if(e)return e.addEventListener("pointerdown",n),e.addEventListener("pointermove",i),e.addEventListener("pointerup",s),e.addEventListener("pointercancel",s),e.addEventListener("wheel",r,{passive:!1}),function(){e.removeEventListener("pointerdown",n),e.removeEventListener("pointermove",i),e.removeEventListener("pointerup",s),e.removeEventListener("pointercancel",s),e.removeEventListener("wheel",r)}}),[t]),null},ae=function(e,t){return e.pointers.map((function(e){return e.id})).indexOf(t)},ce=function(e,t){var i=ae(e,t);return i>-1?e.pointers[i]:null},he=function(){function e(t){Object(h.a)(this,e),this.active=void 0,this.initial=void 0,this.current=void 0,this.diff=void 0,this.state=void 0,this.spacePointer=void 0,this.active=!1,this.initial=new d.r,this.current=new d.r,this.diff=new d.r,this.state=t,this.spacePointer=null}return Object(l.a)(e,[{key:"start",value:function(e,t){this.active=!0,this.current.set(e,t),this.initial.copy(this.current),this.diff.set(0,0);var i=this.state.pressed;i.includes(" ")?this.spacePointer=new re(this.state,{pointerId:999,clientX:this.current.x,clientY:this.current.y}):i.includes("r")?S(this.state):i.includes("d")&&C(this.state)}},{key:"move",value:function(e,t){this.current.set(e,t),this.diff.copy(this.current).sub(this.initial);var i=this.state.pressed;i.includes("r")?H(this.state,this):i.includes("d")&&M(this.state,this)}},{key:"end",value:function(){this.active=!1,this.current.set(0,0),this.diff.set(0,0)}}]),e}(),le=i(10),de=function(e){Object(p.a)(i,e);var t=Object(f.a)(i);function i(e,n,s,r,o,a){var c;Object(h.a)(this,i);var l=new d.a(n,n,n),u=l.getAttribute("uv");u.setXY(0,1,1),u.setXY(1,1,1),u.setXY(2,1,0),u.setXY(3,1,0),u.setXY(4,0,1),u.setXY(5,0,1),u.setXY(6,0,0),u.setXY(7,0,0),u.setXY(8,0,1),u.setXY(9,1,1),u.setXY(10,0,1),u.setXY(11,1,1),u.setXY(12,0,0),u.setXY(13,1,0),u.setXY(14,0,0),u.setXY(15,1,0),u.setXY(16,0,1),u.setXY(17,1,1),u.setXY(18,0,0),u.setXY(15,1,0),u.setXY(20,0,0),u.setXY(21,0,0),u.setXY(22,0,0),u.setXY(23,0,0);for(var v=[1/s,1/r],p=[],f=0;f<r;f++)for(var m=0;m<s;m++)for(var b=0;b<o;b++)p.push(m,f);l.setAttribute("offset",new d.f(new Float32Array(p),2,!1));for(var w=[],j=0;j<r;j++)for(var x=0;x<s;x++)for(var y=0;y<o;y++)w.push(0===y?1:0);l.setAttribute("visible",new d.f(new Float32Array(w),1,!1));var g={texture1:{type:"t",value:a},texScale:{value:v}},O=new d.p({uniforms:g,vertexShader:"\n      varying vec2 vUv;\n      attribute vec2 offset;\n      varying vec2 vOffset;\n      uniform vec2 texScale;\n      varying vec2 vTexScale;\n      attribute float visible;\n\n      void main() {\n        vUv = uv * texScale;\n        vOffset = offset * texScale;\n        vTexScale = texScale;\n\n        gl_Position = projectionMatrix * viewMatrix * modelMatrix * instanceMatrix * vec4(position, 1.0) * visible;\n      }\n    ",fragmentShader:"\n      uniform sampler2D texture1;\n      varying vec2 vUv;\n      varying vec2 vOffset;\n      varying vec2 vTexScale;\n\n      void main() {\n         vec4 color = texture2D(texture1, vec2(vUv.x + vOffset.x, vUv.y + vOffset.y));\n        color.a = 1.0;\n         gl_FragColor = color;\n      }\n    "});c=t.call(this,l,O,s*r*o);for(var P=new d.h,k=0;k<r;k++)for(var C=0;C<s;C++)for(var M=0;M<o;M++){P.setPosition((C+.5)*n-s*n/2,(k+.5)*n-r*n/2,M*n);var E=k*s*o+C*o+M;c.setMatrixAt(E,P)}return e.scene.add(Object(le.a)(c)),c}return i}(d.g),ue=function(e){Object(p.a)(i,e);var t=Object(f.a)(i);function i(e,n,s,r){var o;Object(h.a)(this,i);var a=new d.a(n,n,n/4);a.setAttribute("depth",new d.f(new Float32Array(s*r),1,!1));var c=Array(r*s).fill(0);a.setAttribute("selected",new d.f(new Float32Array(c),1,!1));var l={cellSize:{value:n},color:{value:new d.s(0,1,1)}},u=new d.p({uniforms:l,vertexShader:"\n      attribute float depth;\n      uniform float cellSize;\n      attribute float selected;\n      uniform vec3 color;\n\n      void main() {\n        vec3 depthed = position;\n        depthed.z += depth * cellSize - cellSize / 2.0;\n        vec4 pos = viewMatrix * modelMatrix * instanceMatrix * vec4(depthed, 1.0);\n        gl_Position = projectionMatrix * pos * selected;\n    }\n    ",fragmentShader:"\n      uniform vec3 color;\n      void main() {\n        gl_FragColor = vec4(color, 1.0);\n     }\n   "});(o=t.call(this,a,u,s*r)).state=void 0,o.material=void 0,o.material=u,e.highlightScene.add(Object(le.a)(o)),o.state=e;for(var v=new d.h,p=0;p<r;p++)for(var f=0;f<s;f++){v.setPosition((f+.5)*n-s*n/2,(p+.5)*n-r*n/2,0);var m=p*s+f;o.setMatrixAt(m,v)}return o.updateDepth(),o}return Object(l.a)(i,[{key:"updateDepth",value:function(){for(var e=0;e<this.state.heightGrid.length;e++){var t=this.state.heightGrid[e];this.geometry.attributes.depth.array[e]=t}this.geometry.attributes.depth.needsUpdate=!0}}]),i}(d.g),ve=function e(){Object(h.a)(this,e),this.camera=void 0,this.scene=void 0,this.renderTarget=void 0,this.material=void 0,this.camera=new d.k(75,window.innerWidth/window.innerHeight,.1,100);var t=2*Math.tan(this.camera.fov*Math.PI/360)*5/window.innerHeight;this.renderTarget=new d.t(window.innerWidth,window.innerHeight);var i=new d.l(window.innerWidth*t,window.innerHeight*t);this.material=new d.j({transparent:!0,opacity:.3});var n=new d.i(i,this.material);this.scene=new d.o,this.scene.add(n),this.camera.position.z=5,this.material.map=this.renderTarget.texture},pe=function(){function e(t,i,n){var s=this;Object(h.a)(this,e),this.holder=void 0,this.div=void 0,this.mouse1=void 0,this.mouse2=void 0,this.min=void 0,this.max=void 0,this.topLeft=void 0,this.botRight=void 0,this.diff=void 0,this.kind=void 0,this.activeHandle=void 0,this.mouseOrigin=void 0,this.mouseDiff=void 0,this.minOrigin=void 0,this.maxOrigin=void 0,this.dragging=void 0,this.state=void 0,this.div=document.createElement("div"),this.mouse1=(new d.r).copy(i),this.mouse2=(new d.r).copy(n),this.min=new d.r,this.max=new d.r,this.topLeft=new d.r(0,0),this.botRight=new d.r(window.innerWidth,window.innerHeight),this.diff=new d.r,this.activeHandle=null,this.div.style.border="solid 1px "+t.viewColor,this.div.style.position="absolute",this.kind="fullscreen",this.dragging=!1,this.mouseOrigin=new d.r,this.mouseDiff=new d.r,this.minOrigin=new d.r,this.maxOrigin=new d.r,this.div.style.pointerEvents="auto",this.state=t,this.div.addEventListener("pointerdown",(function(e){e.stopPropagation(),s.dragging=!0,s.mouseOrigin.set(e.clientX,e.clientY),s.minOrigin.copy(s.min),s.maxOrigin.copy(s.max),s.div.setPointerCapture(e.pointerId)})),this.div.addEventListener("pointermove",(function(e){s.dragging&&(s.mouseDiff.set(e.clientX,e.clientY).sub(s.mouseOrigin),s.mouse1.x=s.minOrigin.x+s.mouseDiff.x,s.mouse1.y=s.minOrigin.y+s.mouseDiff.y,s.mouse2.x=s.maxOrigin.x+s.mouseDiff.x,s.mouse2.y=s.maxOrigin.y+s.mouseDiff.y,s.update())})),this.div.addEventListener("pointerup",(function(e){s.dragging=!1,s.div.releasePointerCapture(e.pointerId)})),this.holder=document.createElement("div"),this.holder.style.position="fixed",this.holder.style.left="0px",this.holder.style.top="0px",this.holder.style.right="0px",this.holder.style.bottom="0px",this.holder.style.overflow="hidden",this.holder.style.pointerEvents="none",this.holder.appendChild(this.div),document.body.appendChild(this.holder);for(var r=[[-1,-1],[0,-1],[1,-1],[-1,0],[1,0],[-1,1],[0,1],[1,1]],o={"-1":"0%",0:"50%",1:"100%"},a=function(e){var i=r[e],n=document.createElement("div");n.style.width="48px",n.style.height="48px",n.style.position="absolute",n.style.left=o[i[0].toString()],n.style.top=o[i[1].toString()],n.style.transform="translate(-24px, -24px)",n.style.pointerEvents="auto",n.style.display="none",n.style.padding="16px";var a=document.createElement("div");a.style.width="16px",a.style.height="16px",a.style.background=t.viewColor,n.appendChild(a),n.addEventListener("pointerdown",(function(t){t.stopPropagation(),s.activeHandle=e,-1===i[0]?s.mouse1.x=s.max.x:1===i[0]&&(s.mouse1.x=s.min.x),-1===i[1]?s.mouse1.y=s.max.y:1===i[1]&&(s.mouse1.y=s.min.y),n.setPointerCapture(t.pointerId)})),n.addEventListener("pointermove",(function(e){null!==s.activeHandle&&(0!==i[0]&&(s.mouse2.x=e.clientX),0!==i[1]&&(s.mouse2.y=e.clientY),s.update())})),n.addEventListener("pointerup",(function(e){s.activeHandle=null,n.releasePointerCapture(e.pointerId)})),s.div.appendChild(n)},c=0;c<r.length;c++)a(c);this.update()}return Object(l.a)(e,[{key:"showHandles",value:function(){this.div.style.pointerEvents="auto",this.holder.style.zIndex="40";for(var e=0,t=Array.from(this.div.childNodes);e<t.length;e++){t[e].style.display="block"}}},{key:"hideHandles",value:function(){this.div.style.pointerEvents="none",this.holder.style.zIndex="1";for(var e=0,t=Array.from(this.div.childNodes);e<t.length;e++){t[e].style.display="none"}}},{key:"updateColor",value:function(){for(var e=0,t=Array.from(this.div.childNodes);e<t.length;e++){t[e].childNodes[0].style.background=this.state.viewColor}this.div.style.borderColor=this.state.viewColor}},{key:"update",value:function(){"window"===this.kind?(this.div.style.display="block",this.showHandles(),this.botRight.set(window.innerWidth,window.innerHeight),this.min.copy(this.mouse1).min(this.mouse2).max(this.topLeft),this.max.copy(this.mouse1).max(this.mouse2).min(this.botRight)):"fullscreen"===this.kind&&(this.div.style.display="none",this.botRight.set(window.innerWidth,window.innerHeight),this.hideHandles(),this.min.copy(this.topLeft),this.max.copy(this.botRight)),this.diff.copy(this.max).sub(this.min),this.div.style.left=this.min.x+"px",this.div.style.top=this.min.y+"px",this.div.style.width=this.diff.x+"px",this.div.style.height=this.diff.y+"px"}}]),e}(),fe=function(){function e(t){Object(h.a)(this,e),this.canvas=void 0,this.camera=void 0,this.initialCameraPosition=void 0,this.renderer=void 0,this.scene=void 0,this.worldPixel=void 0,this.boxes=void 0,this.group=void 0,this.outlineBoxes=void 0,this.heightGrid=void 0,this.selectedGrid=void 0,this.keyInterupts=void 0,this.hoverKeyInterrupts=void 0,this.cols=void 0,this.rows=void 0,this.depth=void 0,this.currentImageDims=void 0,this.pressed=void 0,this.center=void 0,this.pressedOne=void 0,this.pointers=void 0,this.PointerOne=void 0,this.PointerTwo=void 0,this.PointerThree=void 0,this.PointerMiddle=void 0,this.lastPointerButtonPressed=void 0,this.initialRotation=void 0,this.gridCache=void 0,this.PointerHover=void 0,this.heightGridCache=void 0,this.viewScene=void 0,this.highlightScene=void 0,this.view=void 0,this.printCanvas=void 0,this.printTarget=void 0,this.backgroundColor=void 0,this.viewColor=void 0,this.backgroundAlpha=void 0,this.highlightColor=void 0,this.highlightAlpha=void 0,this.fullscreenQuad=void 0,this.mode=void 0,this.isTouch=void 0,this.printMultiplier=void 0,this.canvas=t,this.camera=new d.k(75,window.innerWidth/window.innerHeight,.1,100),this.renderer=new d.u({canvas:t,logarithmicDepthBuffer:!0,antialias:!1}),this.renderer.autoClear=!1,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(window.innerWidth,window.innerHeight),this.scene=new d.o,this.pointers=[],this.boxes=[],this.cols=8,this.rows=8,this.depth=48,this.selectedGrid=[],this.gridCache=[],this.heightGrid=[],this.heightGridCache=[],this.pressed=[],this.center=new d.s,this.initialCameraPosition=new d.s,this.pressedOne="",this.PointerOne=new te(this),this.PointerTwo=new ne(this),this.PointerThree=new ie(this),this.PointerMiddle=new se(this),this.PointerHover=new he(this),this.lastPointerButtonPressed=0,this.keyInterupts=[" ","d","r","control"],this.hoverKeyInterrupts=[" ","d","r"],this.initialRotation=new d.c,this.mode="normal",this.viewScene=new d.o,this.highlightScene=new d.o,this.printCanvas=document.createElement("canvas"),this.printCanvas.width=window.innerWidth,this.printCanvas.height=window.innerHeight,this.printTarget=new d.u({canvas:this.printCanvas,alpha:!0}),this.printTarget.setPixelRatio(window.devicePixelRatio),this.currentImageDims=[16,16],this.viewColor="#aaaaaa",this.view=new pe(this,new d.r,new d.r),this.backgroundColor=0,this.backgroundAlpha=0,this.highlightColor=65535,this.highlightAlpha=.3,this.fullscreenQuad=new ve,this.isTouch=window.matchMedia("(pointer: coarse)").matches,this.printMultiplier=2;var i=2*Math.tan(this.camera.fov*Math.PI/360)*5;this.worldPixel=i/window.innerHeight,this.group=new d.e,this.loadImage("bowiealt.jpg"),this.camera.position.z=5,this.animate()}return Object(l.a)(e,[{key:"loadImage",value:function(e){var t=this,i=new d.q;i.setCrossOrigin(""),i.load(e,(function(e){t.scene.remove(t.group),t.group=new d.e;var i=1024,n=e.image;if(n.width>i||n.height>i){var s=n.width/n.height;s>1?(n.width=i,n.height=n.width/s):(n.height=i,n.width=n.height*s)}var r=16*t.worldPixel;t.currentImageDims=[n.width,n.height];var o=Math.round(n.width/16),a=Math.round(n.height/16);t.cols=o,t.rows=a,t.selectedGrid=Array(o*a).fill(0),t.heightGrid=Array(o*a).fill(1);var c=new d.r(window.innerWidth/2-(window.innerWidth/2-32),window.innerHeight/2-(window.innerHeight/2-32)),h=new d.r(window.innerWidth/2+(window.innerWidth/2-32),window.innerHeight/2+(window.innerHeight/2-32));t.view.mouse1.copy(c),t.view.mouse2.copy(h),t.view.update(),t.changeMode("normal");var l=new ue(t,r,o,a),u=new de(t,r,o,a,t.depth,e);u.material.map=e,t.outlineBoxes=l,t.group=u}),(function(){}),(function(e){console.log(e.target)}))}},{key:"animate",value:function(){this.renderer.setClearColor(this.backgroundColor,1),this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(this.fullscreenQuad.renderTarget),this.renderer.setClearColor(this.backgroundColor,0),this.renderer.clear(),this.renderer.render(this.highlightScene,this.camera),this.renderer.setRenderTarget(null),this.fullscreenQuad.material.opacity=this.highlightAlpha,this.renderer.render(this.fullscreenQuad.scene,this.fullscreenQuad.camera),requestAnimationFrame(this.animate.bind(this))}},{key:"changeMode",value:function(e){this.mode=e,"view"===this.mode&&"window"===this.view.kind?this.view.showHandles():this.view.hideHandles()}}]),e}();var me=function(e){var t=e.state;return Object(n.useEffect)((function(){var e=function(e){var i=e.key.toLowerCase();"-"===i?L(t,32):"+"!==i&&"="!==i||L(t,-32),t.pressed.includes(i)||(t.pressed.push(i),function(e,t){e.keyInterupts.includes(t)&&e.PointerOne.active&&(e.PointerOne.end(),e.PointerOne.start(e.PointerOne.subPointers)),e.hoverKeyInterrupts.includes(t)&&e.PointerHover.active&&e.PointerHover.start(e.PointerHover.current.x,e.PointerHover.current.y)}(t,i)),t.pressed.includes("arrowleft")&&E(t,[-1,0]),t.pressed.includes("arrowright")&&E(t,[1,0]),t.pressed.includes("arrowup")&&E(t,[0,-1]),t.pressed.includes("arrowdown")&&E(t,[0,1])},i=function(e){var i=e.key.toLowerCase();" "===i&&t.PointerHover.spacePointer&&(t.PointerHover.spacePointer.remove(),t.PointerHover.spacePointer=null);var n=t.pressed.indexOf(i);-1!==n&&t.pressed.splice(n,1),function(e,t){if(e.keyInterupts.includes(t)&&e.PointerOne.active){var i=e.pressed.indexOf(t);-1!==i&&e.pressed.splice(i,1),e.PointerOne.end(),e.PointerOne.start(e.PointerOne.subPointers)}e.hoverKeyInterrupts.includes(t)&&e.PointerHover.active&&e.PointerHover.start(e.PointerHover.current.x,e.PointerHover.current.y)}(t,i)};return window.addEventListener("keydown",e),window.addEventListener("keyup",i),function(){window.removeEventListener("keydown",e),window.removeEventListener("keyup",i)}}),[t]),null},be=i(4);function we(e){var t=e.children,i=e.clickHandler,n=void 0===i?null:i,s=e.active,r=void 0!==s&&s,o="black"===e.textColor?"800":"200";return Object(be.jsx)("div",{role:"button",className:"h-16 flex items-center justify-center px-5 betterhover:hover:bg-gray-".concat(o," betterhover:hover:bg-opacity-10 ").concat(r?"bg-gray-"+o:""," bg-opacity-10 pointer-events-auto"),style:{minWidth:"8ch"},onClick:function(){return n&&n()},children:t})}function je(e){var t=e.action,i=e.shortcut;return Object(n.useEffect)((function(){var e=function(e){var n=e.key.toLowerCase();e.ctrlKey||n===i&&t()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[t,i]),null}function xe(e){var t=e.title,i=e.children,s=e.display,r=e.setDisplay,o=e.shortcut,a=e.clearModals,h=Object(n.useState)(0),l=Object(c.a)(h,2),d=l[0],u=l[1],v=Object(n.useState)(0),p=Object(c.a)(v,2),f=p[0],m=p[1],b=Object(n.useRef)(!1),w=Object(n.useRef)([0,0]),j=Object(n.useRef)([0,0]);return Object(n.useEffect)((function(){var e=function(e){var t=e.key.toLowerCase();e.ctrlKey||("escape"===t&&r(!1),t===o&&(a(),r(!s)))};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[s,o,a,r]),Object(be.jsx)("div",{className:"fixed inset-0 z-50 pointer-events-none",style:{display:s?"block":"none"},children:Object(be.jsxs)("div",{className:"absolute left-1/2 bg-white text-black pointer-events-auto shadow-md",style:{top:64,maxHeight:"calc(100% - 128px)",width:440,maxWidth:"calc(100% - 32px)",transform:"translate(calc(".concat(d,"px - 50%), ").concat(f,"px)"),overflow:"auto"},children:[Object(be.jsxs)("div",{className:"flex border-b border-gray-200",children:[Object(be.jsx)("div",{className:"px-4 py-3 select-none flex-grow",onPointerDown:function(e){b.current=!0,w.current=[e.clientX,e.clientY],j.current=[d,f]},onPointerMove:function(e){b.current&&(u(j.current[0]+e.clientX-w.current[0]),m(j.current[1]+e.clientY-w.current[1]))},onPointerUp:function(){b.current=!1},children:t}),Object(be.jsx)("div",{role:"button",className:"px-5 py-3 hover:bg-gray-200 cursor-pointer select-none",onClick:function(){return r(!1)},children:"X"})]}),Object(be.jsx)("div",{className:"px-4 py-3",children:i})]})})}function ye(e){var t=e.state,i=e.setMode,s=Object(n.useState)(!1),r=Object(c.a)(s,2),o=r[0],a=r[1],h=Object(n.useState)("black"),l=Object(c.a)(h,2),u=l[0],v=l[1],p=Object(n.useState)(!1),f=Object(c.a)(p,2),m=f[0],b=f[1],w=Object(n.useState)(!1),j=Object(c.a)(w,2),x=j[0],y=j[1],g=Object(n.useState)("#000000"),O=Object(c.a)(g,2),P=O[0],k=O[1],C=Object(n.useState)(!0),M=Object(c.a)(C,2),E=M[0],S=M[1],H=Object(n.useState)(!0),I=Object(c.a)(H,2),L=I[0],T=I[1],R=Object(n.useState)("#00ffff"),F=Object(c.a)(R,2),X=F[0],A=F[1],Y=Object(n.useState)(t.highlightAlpha),D=Object(c.a)(Y,2),z=D[0],G=D[1],W=Object(n.useState)(!1),U=Object(c.a)(W,2),K=U[0],_=U[1],Q=Object(n.useState)(!1),q=Object(c.a)(Q,2),V=q[0],J=q[1],Z=Object(n.useState)(t.viewColor),$=Object(c.a)(Z,2),ee=$[0],te=$[1],ie=Object(n.useRef)(new d.b),ne=Object(n.useState)(t.view.kind),se=Object(c.a)(ne,2),re=se[0],oe=se[1];Object(n.useEffect)((function(){t.backgroundColor=parseInt(P.replace(/^#/,""),16);var e=ie.current.set(P);255*e.r*.299+255*e.g*.587+255*e.b*.114>186?v("black"):v("white")}),[P,t,v]),Object(n.useEffect)((function(){t.backgroundAlpha=E?0:1}),[E,t]),Object(n.useEffect)((function(){t.printMultiplier=L?2:1}),[L,t]),Object(n.useEffect)((function(){t.viewColor=ee,t.view.updateColor()}),[ee,t]),Object(n.useEffect)((function(){var e=ie.current.set(X);t.outlineBoxes&&(t.outlineBoxes.material.uniforms.color.value.set(e.r,e.g,e.b),t.highlightColor=e.getHex())}),[X,t]),Object(n.useEffect)((function(){t.highlightAlpha=z}),[z,t]),Object(n.useEffect)((function(){i(K?"view":"normal")}),[K,t,i]),Object(n.useEffect)((function(){t.view.kind=re,t.view.update()}),[re,t]);var ae=function(){b(!1),y(!1),_(!1),J(!1)};return Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)("div",{className:"fixed left-0 top-0 right-0 h-16 text-".concat(u," flex justify-center z-10 select-none pointer-events-none "),children:Object(be.jsxs)("div",{className:"flex",children:[o?null:Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)(we,{textColor:u,clickHandler:function(){return B(t.loadImage.bind(t))},children:[Object(be.jsx)("u",{children:"o"}),"pen"]}),Object(be.jsx)(je,{action:function(){return B(t.loadImage.bind(t))},shortcut:"o"}),Object(be.jsxs)(we,{textColor:u,clickHandler:function(){ae(),b(!m)},active:m,children:[Object(be.jsx)("u",{children:"a"}),"bout"]}),Object(be.jsxs)(we,{textColor:u,clickHandler:function(){ae(),y(!x)},active:x,children:[Object(be.jsx)("u",{children:"s"}),"ettings"]})]}),Object(be.jsxs)(we,{textColor:u,clickHandler:function(){ae(),a(!o)},active:o,children:[Object(be.jsx)("u",{children:"f"}),"ocus"]}),Object(be.jsx)(je,{action:function(){return a(!o)},shortcut:"f"}),Object(be.jsx)(je,{action:function(){ae(),a(!1)},shortcut:"escape"})]})}),Object(be.jsx)("div",{className:"fixed left-0 bottom-0 right-0 h-16 text-${textColor flex justify-center z-10 select-none",children:Object(be.jsxs)("div",{className:"flex",children:[o?null:Object(be.jsxs)(be.Fragment,{children:[Object(be.jsxs)(we,{textColor:u,clickHandler:function(){ae(),_(!K)},active:K,children:[Object(be.jsx)("u",{children:"v"}),"iew"]}),Object(be.jsxs)(we,{textColor:u,clickHandler:function(){ae(),J(!V)},active:V,children:[Object(be.jsx)("u",{children:"c"}),"ontrols"]})]}),Object(be.jsxs)(we,{textColor:u,clickHandler:function(){return N(t)},children:[Object(be.jsx)("u",{children:"p"}),"rint"]}),Object(be.jsx)(je,{action:function(){return N(t)},shortcut:"p"})]})}),Object(be.jsxs)(xe,{title:"About",display:m,setDisplay:b,shortcut:"a",clearModals:ae,children:[Object(be.jsx)("div",{className:"mb-4",children:"Push and pull blocks to distort an image. Select a section of the image then click and drag it to pull it towards you."}),Object(be.jsxs)("div",{className:"flex justify-between",children:[Object(be.jsxs)("div",{children:["from"," ",Object(be.jsx)("a",{href:"https://constraint.systems",target:"_blank",rel:"noreferrer",children:"Constraint Systems"})]}),Object(be.jsx)("div",{children:Object(be.jsx)("a",{href:"https://github.com/constraint-systems/push",target:"_blank",rel:"noreferrer",children:"View source"})})]})]}),Object(be.jsxs)(xe,{title:"Settings",display:x,setDisplay:y,shortcut:"s",clearModals:ae,children:[Object(be.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-3 border-b",children:[Object(be.jsx)("div",{children:"Save at 2x resolution"}),Object(be.jsx)("input",{type:"checkbox",checked:L,onChange:function(e){T(e.target.checked)}})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-3 border-b",children:[Object(be.jsx)("div",{children:"Transparent background on save"}),Object(be.jsx)("input",{type:"checkbox",checked:E,onChange:function(e){S(e.target.checked)}})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-3 border-b",children:[Object(be.jsx)("div",{children:"Background color"}),Object(be.jsx)("input",{style:{display:"block"},type:"color",value:P,onChange:function(e){k(e.target.value)}})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-3 border-b",children:[Object(be.jsx)("div",{children:"Selection color"}),Object(be.jsx)("input",{type:"color",value:X,onChange:function(e){A(e.target.value)}})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between mb-3 pb-3 border-b",children:[Object(be.jsx)("div",{children:"Selection color opacity"}),Object(be.jsxs)("div",{className:"flex items-center",children:[Object(be.jsx)("input",{className:"mr-2",type:"range",value:z,min:.1,step:.1,max:1,onChange:function(e){G(parseFloat(e.target.value))}})," ",z.toFixed(1)]})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between",children:[Object(be.jsx)("div",{children:"View window color"}),Object(be.jsx)("input",{style:{display:"block"},type:"color",value:ee,onChange:function(e){te(e.target.value)}})]})]}),Object(be.jsxs)(xe,{title:"View",display:K,setDisplay:_,shortcut:"v",clearModals:ae,children:[Object(be.jsx)("div",{className:"flex items-center justify-between mb-2 text-sm",children:"View determines what part of the image is saved when you print. Use window mode to select only a section."}),Object(be.jsxs)("div",{className:"flex items-center justify-between",children:[Object(be.jsx)("div",{children:"Mode"}),Object(be.jsxs)("div",{className:"flex items-center",children:[Object(be.jsxs)("label",{className:"mr-5",onPointerDown:function(e){e.stopPropagation()},onClick:function(){oe("fullscreen")},children:[Object(be.jsx)("input",{type:"radio",value:"Male",className:"mr-2",checked:"fullscreen"===re,onPointerDown:function(e){e.stopPropagation()},onChange:function(){oe("fullscreen")}}),"fullscreen"]}),Object(be.jsxs)("label",{onPointerDown:function(e){e.stopPropagation()},onClick:function(){oe("window")},children:[Object(be.jsx)("input",{type:"radio",className:"mr-2",value:"Female",checked:"window"===re,onChange:function(){oe("window")}}),"window"]})]})]})]}),Object(be.jsxs)(xe,{title:"Controls",display:V,setDisplay:J,shortcut:"c",clearModals:ae,children:[Object(be.jsx)("div",{className:"flex items-center justify-between mb-4",children:"Click and drag to select an area. Click and drag a selected area to push and pull it."}),Object(be.jsx)("div",{className:"flex items-center justify-between mb-2",children:Object(be.jsx)("strong",{children:"Touch"})}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"One-finger"}),Object(be.jsx)("div",{children:"Select, push and pull"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"Two-finger"}),Object(be.jsx)("div",{children:"Rotate, zoom"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-5",children:[Object(be.jsx)("div",{children:"Three-finger"}),Object(be.jsx)("div",{children:"Pan"})]}),Object(be.jsx)("div",{className:"flex items-center justify-between mb-2",children:Object(be.jsx)("strong",{children:"Keyboard and mouse"})}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"Click and drag"}),Object(be.jsx)("div",{children:"Select, push and pull"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"Scroll"}),Object(be.jsx)("div",{children:"Zoom"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"Control or alt + click and drag"}),Object(be.jsx)("div",{children:"Paint select"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"Shift + click and drag"}),Object(be.jsx)("div",{children:"Add to selection"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"r + move"}),Object(be.jsx)("div",{children:"Rotate"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"d + move"}),Object(be.jsx)("div",{children:"Pan"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"Arrows"}),Object(be.jsx)("div",{children:"Pan"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"+ and -"}),Object(be.jsx)("div",{children:"Zoom"})]}),Object(be.jsxs)("div",{className:"flex items-center justify-between border-b pb-1 mb-1",children:[Object(be.jsx)("div",{children:"Space"}),Object(be.jsx)("div",{children:"Mouse click"})]})]})]})}var ge=function(){var e=Object(n.useRef)(null),t=Object(n.useState)(null),i=Object(c.a)(t,2),s=i[0],r=i[1],o=Object(n.useState)("normal"),h=Object(c.a)(o,2),l=h[0],d=h[1];return Object(n.useEffect)((function(){null!==s&&s.changeMode(l)}),[l,s]),Object(n.useEffect)((function(){var t=e.current,i=new fe(t);r(i);var n=function(){var e=window.innerWidth-i.renderer.domElement.width,t=window.innerHeight-i.renderer.domElement.height;i.view.mouse1.copy(i.view.min),i.view.mouse2.copy(i.view.max),i.view.mouse1.x+=e/2,i.view.mouse1.y+=t/2,i.view.mouse2.x+=e/2,i.view.mouse2.y+=t/2;var n=window.innerHeight/2/(i.renderer.domElement.height/2),s=i.view.mouse1.x-window.innerWidth/2;i.view.mouse1.x=s*n+window.innerWidth/2;var r=i.view.mouse2.x-window.innerWidth/2;i.view.mouse2.x=r*n+window.innerWidth/2;var o=i.view.mouse1.y-window.innerHeight/2;i.view.mouse1.y=o*n+window.innerHeight/2;var a=i.view.mouse2.y-window.innerHeight/2;i.view.mouse2.y=a*n+window.innerHeight/2,i.view.update(),i.renderer.setSize(window.innerWidth,window.innerHeight),i.camera.aspect=window.innerWidth/window.innerHeight,i.camera.updateProjectionMatrix()};return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[]),Object(n.useEffect)((function(){if(s){var e=function(e){e.preventDefault(),e.stopPropagation();var t,i=Object(a.a)(e.clipboardData.items);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(!(n.type.indexOf("image")<0)){var r=n.getAsFile(),o=URL.createObjectURL(r);s.loadImage(o)}}}catch(c){i.e(c)}finally{i.f()}},t=function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.files[0],i=URL.createObjectURL(t);s.loadImage(i)},i=function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"};return window.addEventListener("paste",e),window.addEventListener("dragover",i),window.addEventListener("drop",t),function(){window.removeEventListener("paste",e),window.removeEventListener("dragover",i),window.removeEventListener("drop",t)}}}),[s]),Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)("input",{id:"fileInput",type:"file",style:{display:"none"}}),Object(be.jsx)("canvas",{ref:e}),s?Object(be.jsxs)(be.Fragment,{children:[Object(be.jsx)(oe,{state:s}),Object(be.jsx)(me,{state:s}),Object(be.jsx)(ye,{state:s,setMode:d})]}):null]})},Oe=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,26)).then((function(t){var i=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,o=t.getTTFB;i(e),n(e),s(e),r(e),o(e)}))};o.a.render(Object(be.jsx)(s.a.StrictMode,{children:Object(be.jsx)(ge,{})}),document.getElementById("root")),Oe()}},[[25,1,2]]]);
//# sourceMappingURL=main.5c0a69ec.chunk.js.map